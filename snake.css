*{box-sizing:border-box}
html,body{height:100%;margin:0}
body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial; background:radial-gradient(1200px 600px at 20% -10%, rgba(56,189,248,.2), transparent 50%), radial-gradient(900px 500px at 120% 10%, rgba(34,197,94,.18), transparent 50%), linear-gradient(180deg,#0b1022,#0f172a 40%,#0a0f1f 100%); color:#e2e8f0}

.topbar{position:sticky;top:0;z-index:10;backdrop-filter:saturate(140%) blur(8px); background:rgba(10,15,31,.6); border-bottom:1px solid #1f2a44; max-width:960px;margin:0 auto;padding:14px 20px;display:flex;align-items:center;justify-content:space-between}
.brand{display:flex;align-items:center;gap:10px;font-weight:700}
.logo{width:32px;height:32px;border-radius:8px;display:inline-grid;place-items:center;background:linear-gradient(135deg,#22c55e 0%,#86efac 50%,#34d399 100%);box-shadow:0 6px 18px rgba(34,197,94,.35);color:#052e1a;font-weight:800}
.actions{display:flex;gap:8px}

.wrap{max-width:960px;margin:0 auto;padding:16px;display:grid;grid-template-columns:260px 1fr 160px;gap:16px}
.card{background:rgba(11,18,36,.6);border:1px solid #1f2a44;border-radius:16px;backdrop-filter:blur(6px)}

.hud{padding:16px;height:max-content}
.stat{display:flex;align-items:center;justify-content:space-between;padding:12px;border-radius:12px;background:#0a1328;border:1px solid #1f2a44}
.stat+.stat{margin-top:10px}

.stage{position:relative;display:grid;place-items:center;padding:12px}
canvas{width:100%;height:auto;image-rendering:pixelated;border-radius:16px;border:1px solid #1f2a44;background:linear-gradient(180deg,#0b1224,#0c1428);box-shadow:0 12px 40px rgba(23, 37, 84, .45), inset 0 0 0 1px rgba(31,42,68,.4)}
.overlay{position:absolute;inset:12px;display:grid;place-items:center;text-align:center;background:rgba(2,6,23,.55);backdrop-filter:blur(4px);border:1px dashed #1f2a44;border-radius:16px}
.overlay.hidden{display:none}
.message{font-size:28px;font-weight:800;margin-bottom:6px;text-shadow:0 6px 22px rgba(34,197,94,.25)}
.hint{color:#9aa8bc}

.controls{display:grid;place-items:center;gap:10px}
.controls .row{display:flex;gap:8px}
.dpad{width:72px;height:72px;border-radius:14px;border:1px solid #1f2a44;background:linear-gradient(180deg,#0f1b36,#0b1224);color:#e2e8f0;font-size:22px;box-shadow:0 8px 22px rgba(2,6,23,.65), inset 0 0 0 1px rgba(255,255,255,.03);transition:transform .06s ease, filter .2s ease}
.dpad:active{transform:translateY(1px)}

.btn{padding:10px 14px;border-radius:10px;border:1px solid #1f2a44;background:#0b1224;color:#e2e8f0;font-weight:700;box-shadow:0 8px 22px rgba(23, 37, 84, .35)}
.btn.primary{background:linear-gradient(180deg,#22c55e,#16a34a);color:#052e1a;border-color:#22c55e;box-shadow:0 10px 26px rgba(34,197,94,.45)}
.btn:hover{filter:brightness(1.07)}

.footer{text-align:center;padding:20px;color:#9aa8bc;padding-bottom:calc(20px + env(safe-area-inset-bottom))}

@media (max-width: 900px){
  .wrap{grid-template-columns:1fr}
  .controls{grid-row:3; position:sticky; bottom:0; padding:10px 0}
}

@media (max-width: 560px){
  .dpad{width:80px;height:80px;font-size:24px}
}

@media (prefers-reduced-motion: reduce){
  .dpad,.btn{transition:none}
}
